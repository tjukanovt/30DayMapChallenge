!function (o) { o.fn.prognroll = function (r) { var t = o.extend({ height: 5, color: "#50bcb6", custom: !1 }, r), i = o("<span>", { class: "prognroll-bar" }); return this.each(function (r, n) { if (o(this).data("prognroll")) return !1; o(this).data("prognroll", !0), o("body").prepend(i).end().find(".prognroll-bar").not(":first").remove(), o(".prognroll-bar").css({ position: "fixed", top: 0, left: 0, width: 0, height: t.height, backgroundColor: t.color, zIndex: 2147483647 }); var e = { windowScrollTop: o(window).scrollTop(), windowOuterHeight: o(window).outerHeight(), bodyHeight: o(document).height() }; function l() { o(window).scroll(function (r) { r.preventDefault(), e.windowScrollTop = o(window).scrollTop(), e.windowOuterHeight = o(window).outerHeight(), e.bodyHeight = o(document).height(); var t = e.windowScrollTop / (e.bodyHeight - e.windowOuterHeight) * 100; o(".prognroll-bar").css("width", t + "%") }) } !1 === t.custom ? l() : "none" == o(this).css("max-height") ? l() : o(this).scroll(function (r) { r.preventDefault(); var t = o(this).scrollTop(), i = o(this).outerHeight(), n = t / (o(this).prop("scrollHeight") - i) * 100; o(".prognroll-bar").css("width", n + "%") }); var h = e.windowScrollTop / (e.bodyHeight - e.windowOuterHeight) * 100; o(".prognroll-bar").css("width", h + "%") }) } }(jQuery);